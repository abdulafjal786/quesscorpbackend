(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,52845,e=>{"use strict";var t=e.i(43476),a=e.i(61911),r=e.i(75254);let s=(0,r.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),l=(0,r.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),o=(0,r.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var d=e.i(71645),n=e.i(47163);let c=d.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,n.cn)("rounded-xl border border-gray-200 bg-white shadow-sm",e),...r,children:a}));c.displayName="Card",d.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",d.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",d.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-gray-500",e),...a})).displayName="CardDescription",d.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...a})).displayName="CardContent",d.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.i(47167);let i="http://127.0.0.1:8000";function m(e){return{id:e.employee_id,name:e.full_name,email:e.email,phone:e.phone||"",department:e.department,position:e.position||"",hireDate:e.hire_date||new Date().toISOString().split("T")[0],salary:e.salary||0,status:e.status||"active",employee_id:e.employee_id}}async function x(){try{let e=await fetch(`${i}/employee/employees/`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok){let t=await e.text();throw console.error("API Error:",{status:e.status,statusText:e.statusText,body:t}),Error(`Failed to fetch employees: ${e.status} ${e.statusText}`)}return{data:(await e.json()).map(m),message:"Employees loaded successfully"}}catch(e){return console.error("Error fetching employees:",e),{error:e instanceof Error?e.message:"Failed to load employees"}}}async function p(e){try{let t=`${i}/employee/attendance/`;e&&(t+=`?date=${e}`);let a=await fetch(t,{method:"GET",headers:{Accept:"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.detail||"Failed to fetch attendance records")}let r=await a.json();return console.log("Fetched attendance records:",r),{data:r}}catch(e){return console.error("Error fetching attendance:",e),{error:e instanceof Error?e.message:"Failed to fetch attendance"}}}function y(){let[e,r]=(0,d.useState)(null),[n,i]=(0,d.useState)([]),[m,y]=(0,d.useState)(!0),[h,u]=(0,d.useState)(null);if((0,d.useEffect)(()=>{(async()=>{try{y(!0),u(null);let e=await p(),t=await x();if(e?.error||t?.error)return void u(e?.error||t?.error||"Failed to load data");let a=e?.data||[],s=t?.data||[];i(a);let l=a.filter(e=>"present"===e.status).length,o=a.filter(e=>"absent"===e.status).length,d=s.length,n=l+o,c=Math.max(d-n,0),m=d>0?`${(l/d*100).toFixed(1)}%`:"0%";r({present_today:l,absent_today:o,total_employees:d,marked_today:n,pending_today:c,attendance_rate:m})}catch(e){console.error(e),u("Failed to load attendance statistics")}finally{y(!1)}})()},[]),m)return(0,t.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,t.jsxs)(c,{className:"p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,t.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},e))});if(h)return(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-700",children:h})});let g=[{title:"Present Today",value:e?.present_today??0,change:`${e?.marked_today??0} of ${e?.total_employees??0} marked`,icon:l,color:"bg-green-500",textColor:"text-green-700",bgColor:"bg-green-50"},{title:"Absent Today",value:e?.absent_today??0,change:`${e?.pending_today??0} pending attendance`,icon:o,color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50"},{title:"Total Employees",value:e?.total_employees??0,change:`${e?.present_today??0} present, ${e?.absent_today??0} absent`,icon:a.Users,color:"bg-blue-500",textColor:"text-blue-700",bgColor:"bg-blue-50"},{title:"Attendance Rate",value:e?.attendance_rate??"0%",change:"Today's overall rate",icon:s,color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50"}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:g.map(e=>{let a=e.icon;return(0,t.jsx)(c,{className:`p-6 ${e.bgColor}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:`text-sm font-medium ${e.textColor}`,children:e.title}),(0,t.jsx)("p",{className:"mt-2 text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:`mt-1 text-sm ${e.textColor}`,children:e.change})]}),(0,t.jsx)("div",{className:`${e.color} rounded-lg p-3`,children:(0,t.jsx)(a,{className:"h-6 w-6 text-white"})})]})},e.title)})}),(0,t.jsxs)(c,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Todayâ€™s Attendance"}),0===n.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No attendance records found."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Employee"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),(0,t.jsx)("tbody",{children:n.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.employee_name}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.date}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"present"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status})})]},e.id))})]})})]})]})}e.s(["default",()=>y],52845)}]);