(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54858,e=>{"use strict";let t="http://13.233.178.226";function a(e){return{id:e.employee_id,name:e.full_name,email:e.email,phone:e.phone||"",department:e.department,position:e.position||"",hireDate:e.hire_date||new Date().toISOString().split("T")[0],salary:e.salary||0,status:e.status||"active",employee_id:e.employee_id}}async function r(){try{let e=await fetch(`${t}/api/employee/employees/`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!e.ok){let t=await e.text();throw console.error("API Error:",{status:e.status,statusText:e.statusText,body:t}),Error(`Failed to fetch employees: ${e.status} ${e.statusText}`)}return{data:(await e.json()).map(a),message:"Employees loaded successfully"}}catch(e){return console.error("Error fetching employees:",e),{error:e instanceof Error?e.message:"Failed to load employees"}}}async function s(e){try{let a=await fetch(`${t}/api/employee/employees/add/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();throw console.error("Create employee error:",e),Error(e.message||e.detail||"Failed to create employee")}let r=await a.json();return{data:l(r),message:"Employee created successfully"}}catch(e){return console.error("Error creating employee:",e),{error:e instanceof Error?e.message:"Failed to create employee",data:void 0}}}async function o(e){try{let a=await fetch(`${t}/api/employee/employees/delete/${e}/`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!a.ok){let e=await a.json();throw Error(e.message||"Failed to delete employee")}return{message:"Employee deleted successfully"}}catch(e){return console.error("Error deleting employee:",e),{error:e instanceof Error?e.message:"Failed to delete employee"}}}function l(e){return{id:e.employee_id||e.id.toString(),name:e.full_name,email:e.email,phone:e.phone||"",department:e.department,position:e.position||"",hireDate:e.hire_date||"",salary:e.salary||0,status:e.status||"active",employee_id:e.employee_id,user_id:e.user}}async function n(e){try{let a=await fetch(`${t}/api/employee/employees/search/?search=${encodeURIComponent(e)}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"},cache:"no-store"});if(!a.ok){let e=await a.text();throw console.error("Search API Error:",{status:a.status,statusText:a.statusText,body:e}),Error(`Search failed: ${a.status} ${a.statusText}`)}let r=await a.json();return{data:Array.isArray(r)?r.map(l):[],message:"Search completed successfully"}}catch(e){return console.error("Error searching employees:",e),{error:e instanceof Error?e.message:"Failed to search employees",data:[]}}}async function i(e){try{let a=await fetch(`${t}/api/employee/attendance/mark/`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(e)});if(console.log("Response status:",a.status),!a.ok){let e="Failed to mark attendance";try{let t=await a.json();if(console.log("Error response:",t),"object"==typeof t){if(t.detail)e=t.detail;else if(t.message)e=t.message;else if(t.error)e=t.error;else for(let[a,r]of Object.entries(t))if(Array.isArray(r)&&r.length>0){e=`${a}: ${r[0]}`;break}}}catch(t){e=`HTTP ${a.status}: ${a.statusText}`}throw Error(e)}let r=await a.json();return console.log("Success response:",r),{data:r}}catch(e){return console.error("Error marking attendance:",e),{error:e instanceof Error?e.message:"Failed to mark attendance"}}}async function c(e){let a=new URLSearchParams;e&&a.append("date",e);let r=`${t}/api/employee/attendance/${a.toString()?`?${a.toString()}`:""}`;try{let e=await fetch(r);if(!e.ok){let t=await e.text();throw Error(`API Error ${e.status}: ${t}`)}return{data:await e.json()}}catch(e){return console.error("Attendance Fetch Error:",e),{error:e instanceof Error?e.message:"Unknown error"}}}e.s(["createEmployee",()=>s,"deleteEmployee",()=>o,"getAttendanceRecords",0,c,"getEmployees",()=>r,"markAttendance",()=>i,"searchEmployees",()=>n])},52845,e=>{"use strict";var t=e.i(43476),a=e.i(61911),r=e.i(75254);let s=(0,r.default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),o=(0,r.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),l=(0,r.default)("user-x",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);var n=e.i(71645),i=e.i(47163);let c=n.forwardRef(({className:e,children:a,...r},s)=>(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border border-gray-200 bg-white shadow-sm",e),...r,children:a}));c.displayName="Card",n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...a})).displayName="CardHeader",n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,i.cn)("font-semibold leading-none tracking-tight",e),...a})).displayName="CardTitle",n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-gray-500",e),...a})).displayName="CardDescription",n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...a})).displayName="CardContent",n.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter";var d=e.i(54858);function m(){let[e,r]=(0,n.useState)(null),[i,m]=(0,n.useState)([]),[p,y]=(0,n.useState)(!0),[h,u]=(0,n.useState)(null);if((0,n.useEffect)(()=>{(async()=>{try{y(!0),u(null);let e=await (0,d.getAttendanceRecords)(),t=await (0,d.getEmployees)();if(e?.error||t?.error)return void u(e?.error||t?.error||"Failed to load data");let a=e?.data||[],s=t?.data||[];m(a);let o=a.filter(e=>"present"===e.status).length,l=a.filter(e=>"absent"===e.status).length,n=s.length,i=o+l,c=Math.max(n-i,0),p=n>0?`${(o/n*100).toFixed(1)}%`:"0%";r({present_today:o,absent_today:l,total_employees:n,marked_today:i,pending_today:c,attendance_rate:p})}catch(e){console.error(e),u("Failed to load attendance statistics")}finally{y(!1)}})()},[]),p)return(0,t.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[1,2,3,4].map(e=>(0,t.jsxs)(c,{className:"p-6 animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,t.jsx)("div",{className:"h-8 bg-gray-300 rounded w-1/3 mb-2"}),(0,t.jsx)("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},e))});if(h)return(0,t.jsx)("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,t.jsx)("p",{className:"text-red-700",children:h})});let x=[{title:"Present Today",value:e?.present_today??0,change:`${e?.marked_today??0} of ${e?.total_employees??0} marked`,icon:o,color:"bg-green-500",textColor:"text-green-700",bgColor:"bg-green-50"},{title:"Absent Today",value:e?.absent_today??0,change:`${e?.pending_today??0} pending attendance`,icon:l,color:"bg-red-500",textColor:"text-red-700",bgColor:"bg-red-50"},{title:"Total Employees",value:e?.total_employees??0,change:`${e?.present_today??0} present, ${e?.absent_today??0} absent`,icon:a.Users,color:"bg-blue-500",textColor:"text-blue-700",bgColor:"bg-blue-50"},{title:"Attendance Rate",value:e?.attendance_rate??"0%",change:"Today's overall rate",icon:s,color:"bg-yellow-500",textColor:"text-yellow-700",bgColor:"bg-yellow-50"}];return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"grid gap-6 sm:grid-cols-2 lg:grid-cols-4",children:x.map(e=>{let a=e.icon;return(0,t.jsx)(c,{className:`p-6 ${e.bgColor}`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:`text-sm font-medium ${e.textColor}`,children:e.title}),(0,t.jsx)("p",{className:"mt-2 text-2xl font-bold text-gray-900",children:e.value}),(0,t.jsx)("p",{className:`mt-1 text-sm ${e.textColor}`,children:e.change})]}),(0,t.jsx)("div",{className:`${e.color} rounded-lg p-3`,children:(0,t.jsx)(a,{className:"h-6 w-6 text-white"})})]})},e.title)})}),(0,t.jsxs)(c,{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Todayâ€™s Attendance"}),0===i.length?(0,t.jsx)("p",{className:"text-gray-500",children:"No attendance records found."}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border border-gray-200 rounded-lg",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Employee"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Date"}),(0,t.jsx)("th",{className:"px-4 py-2 text-left text-sm font-medium text-gray-700",children:"Status"})]})}),(0,t.jsx)("tbody",{children:i.map(e=>(0,t.jsxs)("tr",{className:"border-t",children:[(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.employee_name}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:e.date}),(0,t.jsx)("td",{className:"px-4 py-2 text-sm",children:(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${"present"===e.status?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:e.status})})]},e.id))})]})})]})]})}e.s(["default",()=>m],52845)}]);